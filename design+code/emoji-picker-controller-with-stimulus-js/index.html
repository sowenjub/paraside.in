<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="üèù Living in Paraside"/><link rel="canonical" href="https://paraside.in/design+code/emoji-picker-controller-with-stimulus-js"/><meta name="twitter:url" content="https://paraside.in/design+code/emoji-picker-controller-with-stimulus-js"/><meta name="og:url" content="https://paraside.in/design+code/emoji-picker-controller-with-stimulus-js"/><title>Emoji picker controller with StimulusJS and Emoji Button | üèù Living in Paraside</title><meta name="twitter:title" content="Emoji picker controller with StimulusJS and Emoji Button | üèù Living in Paraside"/><meta name="og:title" content="Emoji picker controller with StimulusJS and Emoji Button | üèù Living in Paraside"/><meta name="description" content="Adding an emoji picker to a Rails app"/><meta name="twitter:description" content="Adding an emoji picker to a Rails app"/><meta name="og:description" content="Adding an emoji picker to a Rails app"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to üèù Living in Paraside"/></head><body class="bg-white font-sans leading-normal tracking-normal"><div class="pb-16"><nav class="fixed z-10 bg-gray-900 p-4 mt-0 w-full overflow-auto scrolling-touch"><div class="container mx-auto flex items-center"><div class="flex-shrink-0 text-white font-extrabold"><a class="flex text-white text-base no-underline hover:text-white hover:no-underline" href="/"><span class="block md:hidden md:w-auto pl-1">üèù</span><span class="hidden md:block w-0 md:w-auto pl-1">üèù Living in Paraside</span></a></div><div class=" flex flex-no-wrap pl-4 text-sm"><ul class="list-reset flex justify-between items-center"><li class="mr-2"><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2" href="/">HOME</a></li><li><a class="inline-block py-2 px-2 text-white no-underline hover:underline whitespace-no-wrap" href="/design+code">DESIGN+CODE</a></li></ul></div></div></nav></div><div class="text-center pt-16 md:pt-32"><p class="text-xs md:text-sm text-casper-blue font-bold">15 JULY 2020<span class="text-gray-900 px-1">/</span><a href="/tags/rails">RAILS</a></p><h1 class="font-bold break-normal text-3xl md:text-5xl max-w-6xl mx-auto">Emoji picker controller with StimulusJS and Emoji Button</h1></div><div class="container w-full max-w-6xl mx-auto bg-white bg-cover bg-center mt-8 sm:rounded" style="background-color: #424242; background-image:url('/covers/emoji.png'); height: 75vh;"></div><div class="container max-w-5xl mx-auto"><div class="mx-0 sm:mx-6"><main class="bg-white w-full p-8 md:p-24 text-gray-800 leading-normal"><article class="prose prose-sm sm:prose-xl break-words"><img src="https://dev-to-uploads.s3.amazonaws.com/i/0rn1pcp9tlk73nzrnuki.png" alt="Alt Text"/><p>I needed an emoji picker for my latest Rails app and found <a href="https://github.com/joeattardi/emoji-button">Emoji Button</a> by @joeattardi that he introduced <a href="https://dev.to/joeattardi/emoji-button-a-vanilla-javascript-emoji-picker-1lf9">here</a>.</p><p>Since he already did the heavy-lifting required to provide a vanilla JavaScript emoji picker component, I just needed to add it to my app and create a Stimulus controller. And here's how to do it for yours.</p><p>I'll assume you already have <a href="https://stimulusjs.org">StimulusJS</a> installed. From there, it's only a couple of steps.</p><p>First, open your Terminal and add the emoji-button package.</p><pre><code class="language-bash">yarn add @joeattardi/emoji-button
</code></pre><p>Then, create a <code>app/javascript/controllers/emoji_picker_controller.js</code> with this code inside</p><pre><code class="language-ruby">import { Controller } from "stimulus"
import EmojiButton from '@joeattardi/emoji-button'

export default class extends Controller {
  static targets = [ "button", "input" ]

  connect() {
    this.picker = new EmojiButton()
    this.picker.on('emoji', emoji =&gt; {
      this.buttonTarget.innerHTML = emoji
      this.inputTarget.value = emoji
    })
  }

  toggle(event) {
    event.preventDefault()
    this.picker.togglePicker(event.target)
  }
}
</code></pre><p>And now, if you have a <code>Post</code> model with an <code>emoji</code> attribute, you can do this in your form (the syntax below uses Slim instead of ERB):</p><pre><code class="language-ruby">= form_for post, url: post_path(post), data: { controller: "emoji-picker" } do |f|
  button data-action="emoji-picker#toggle" data-target="emoji-picker.button"
    = post.emoji.presence || content_tag(:i, nil, class: "fad fa-smile text-gray-400")
    = f.hidden_field :emoji, data: { target: "emoji-picker.input" }
</code></pre><p>The <code>content_tag(:i, nil, class: "fad fa-smile text-gray-400")</code> bit uses <a href="https://fontawesome.com">FontAwesome</a> to show a default gray emoji when there is none.</p><p>And that's all there is to it. Anytime you click the button, the picker will be toggled, and if you select an emoji, both the button and the hidden form input will be updated.</p></article></main><div class="flex flex-wrap w-full items-center font-sans p-8 md:p-24"><div class="md:flex-1 flex"><img class="w-10 h-10 rounded-full mr-4" src="/arnaud_joubay.jpg" alt="Arnaud Joubay"/><div class="flex-1"><p class="text-base font-bold text-base md:text-xl leading-none">Arnaud Joubay</p><p class="text-gray-600 text-xs md:text-base">Swift &amp; Rails Indie Maker</p></div></div><div class="mt-8 md:mt-0 mx-auto md:mx-0 md:justify-end"><a class="bg-transparent border border-gray-500 hover:border-casper-blue text-xs text-gray-500 hover:text-casper-blue font-bold py-2 px-4 rounded-full" href="/tags">All tags</a></div></div></div></div><div class="bg-gray-200"><div class="container w-full max-w-6xl mx-auto px-2 py-8"><div class="grid grid-cols-1 sm:grid-cols-3 gap-12"><div class="w-full  py-6 flex flex-col flex-grow flex-shrink transform transition duration-200 ease-in-out hover:scale-105"><div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow-lg"><a href="/design+code/required-form-label-with-rails-tailwindcss" class="flex flex-wrap no-underline hover:no-underline"><img src="/images/4h1u11qacj0zpqhlsuxz.png" class="h-64 w-full rounded-t pb-6 object-cover"/><p class="w-full text-casper-blue text-xs font-medium px-6">RAILS</p><div class="w-full font-bold text-2xl text-gray-900 px-6">Rails+TailwindCSS: adding "required" to form labels (and how to find the solution by yourself)</div><p class="text-gray-800 font-serif text-lg px-6 mb-5">This post addresses a simple need: adding a "required" text next to any form field label that is‚Ä¶ required.</p></a></div><div class="flex-none mt-auto bg-white rounded-b rounded-t-none overflow-hidden shadow-lg p-6"><div class="flex items-center justify-between"><img class="w-8 h-8 rounded-full mr-4 avatar" src="/arnaud_joubay.jpg" alt="Arnaud Joubay"/><p class="text-gray-600 text-xs md:text-sm">11 MIN READ</p></div></div></div></div></div></div><footer class="bg-gray-900"><div class="container max-w-6xl mx-auto flex items-center px-2 pt-2 pb-8"><div class="w-full mx-auto flex flex-wrap items-center"><div class="flex w-full md:w-1/2 justify-center md:justify-start text-white font-extrabold"><p><a class="text-gray-900 no-underline hover:text-gray-900 hover:no-underline" href="#"><span class="text-base text-gray-200">üèù Living in Paraside</span></a></p></div><div class="flex w-full pt-2 content-center justify-between md:w-1/2 md:justify-end"><ul class="list-reset flex justify-center flex-1 md:flex-none items-center"><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="/">Latest Posts</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="https://github.com/JohnSundell/Publish">Publish</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="https://ghost.org">Ghost</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline px-3 text-sm" href="/feed.rss"><svg class="fill-current h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg></a></li></ul></div></div></div></footer></body></html>